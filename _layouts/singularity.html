<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>{{ page.title | default: site.title | default: "shift byDesign" }}</title>

  {% seo %}

  <link rel="icon" href="{{ '/assets/brand/favicon.ico' | relative_url }}" sizes="any">
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/brand/favicon.svg' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/brand/apple-touch-icon.png' | relative_url }}">
  <link rel="manifest" href="{{ '/site.webmanifest' | relative_url }}">
  <meta name="theme-color" content="#000000">

  <link rel="stylesheet"
      href="{{ '/assets/main.css' | relative_url }}?v={{ site.github.build_revision | default: site.time | date: '%s' }}" />

  <meta name="color-scheme" content="light">
</head>

<!-- Google tag -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V57BVWVB8E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-V57BVWVB8E');
</script>

<body>

  <main class="site">
    <section class="brand-wrap">
      <div class="brand" role="banner" aria-label="shift byDesign">
        <div class="brand-stack">

          <div class="swap-img brand-logo">
            <img class="layer base"
                 src="{{ '/assets/brand/logomark-gray.png'  | relative_url }}"
                 alt=""
                 decoding="async"
                 fetchpriority="high">
            <img class="layer color"
                 src="{{ '/assets/brand/logomark-color.png' | relative_url }}"
                 alt=""
                 decoding="async"
                 fetchpriority="high">
          </div>

          <div class="swap-img brand-name">
            <img class="layer base"
                 src="{{ '/assets/brand/logotype-black.png' | relative_url }}"
                 alt="shift byDesign"
                 decoding="async"
                 fetchpriority="high">
            <img class="layer color"
                 src="{{ '/assets/brand/logotype-color.png' | relative_url }}"
                 alt=""
                 decoding="async"
                 fetchpriority="high">
          </div>

          <p class="tagline">
            <span class="shift">shift</span> is standard
            <span class="double-slash">//</span>&nbsp;
            <span class="design">design</span> is craft
          </p>

          <!-- === Fixed corner Singularity below brand === -->
          <div class="bd-singularity" id="bd-singularity" aria-label="Enter the Singularity">
            <div class="cta" role="button" tabindex="0" aria-label="Enter the Singularity">
              <span class="pre">enter the</span>
              <span class="mark">Singularity</span>
            </div>

            <div class="svg-wrap" aria-hidden="true">
              {% include singularity.html %}
            </div>
          </div>
          <!-- === End Singularity block === -->

        </div>
      </div>
    </section>

    {% include social-media-links.html %}
  </main>

  <script>
  (function () {
    const host = document.getElementById('bd-singularity');
    if (!host) return;
    const svg = host.querySelector('svg');
    const swirls = svg && svg.querySelector('.swirls');
    if (!svg || !swirls) return;

    swirls.style.transformBox = 'fill-box';
    swirls.style.transformOrigin = '50% 50%';

    let angle = 0;
    let speed = 0.45;
    let targetSpeed = speed;
    const FAST = 1.8;
    const EASE = 0.12;

    const onEnter = () => targetSpeed = FAST;
    const onLeave = () => targetSpeed = 0.45;
    host.addEventListener('mouseenter', onEnter);
    host.addEventListener('mouseleave', onLeave);
    host.addEventListener('focusin', onEnter);
    host.addEventListener('focusout', onLeave);

    function tick() {
      speed += (targetSpeed - speed) * EASE;
      angle = (angle + speed) % 360;
      swirls.style.transform = `rotate(${angle}deg)`;
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  })();
  </script>

  <script>
    (function () {
      document.querySelectorAll('.social-item').forEach(function (tile) {
        const img = tile.querySelector('img.icon');
        const bg  = tile.querySelector('.bg');
        const mode = img?.getAttribute('data-mode') || '';
        const srcDefault = img?.getAttribute('src');
        const srcWhite   = img?.getAttribute('data-white');

        tile.addEventListener('mouseenter', function () {
          if (bg) {
            const brandColor = getComputedStyle(tile).getPropertyValue('--brand').trim();
            bg.style.setProperty('--bg', brandColor);
          }
          tile.classList.add('hovered');
          if (mode === 'invert') {
            if (img) img.style.filter = 'invert(0)';
          } else if (srcWhite && img) {
            img.src = srcWhite;
          }
        });

        tile.addEventListener('mouseleave', function () {
          tile.classList.remove('hovered');
          if (mode === 'invert') {
            if (img) img.style.filter = 'invert(1)';
          } else if (srcDefault && img) {
            img.src = srcDefault;
          }
        });

        if (mode === 'invert' && img) {
          img.style.filter = 'invert(1)';
        }
      });
    })();
  </script>

</body>
</html>
