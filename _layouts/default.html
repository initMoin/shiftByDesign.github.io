<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{ page.title | default: site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {%- seo -%}

    <!-- Main CSS (Jekyll will compile assets/main.scss -> /assets/main.css) -->
    <link rel="stylesheet" href="{{ '/assets/main.css' | relative_url }}">

    <!-- Favicons & manifest (adjust paths if yours differ) -->
    <link rel="icon" href="{{ '/assets/brand/favicon.ico' | relative_url }}" sizes="any">
    <link rel="icon" href="{{ '/assets/brand/favicon.svg' | relative_url }}" type="image/svg+xml">
    <link rel="apple-touch-icon" href="{{ '/assets/brand/apple-touch-icon.png' | relative_url }}">
    <link rel="mask-icon" href="{{ '/assets/brand/safari-pinned-tab.svg' | relative_url }}" color="#000000">
    <link rel="manifest" href="{{ '/site.webmanifest' | relative_url }}">
    <meta name="theme-color" content="#000000">
  </head>
  <body>
    <main class="site">
      <!-- Row 1 (fills the viewport): brand centered both ways -->
      <section class="brand-wrap">
        <section class="brand" aria-label="shift byDesign">
          <div class="brand-row">
            <!-- Logomark: gray ⇄ color crossfade (stacked images) -->
            <span class="brand-logo">
              <img class="brand-logo__img img--gray"  src="/assets/brand/logomark-gray.png"  alt="">
              <img class="brand-logo__img img--color" src="/assets/brand/logomark-color.png" alt="">
            </span>

            <!-- Logotype: monochrome; subtle baseline nudge on hover -->
            <img class="brand-name" src="/assets/brand/logotype-black.png" alt="shift byDesign">
          </div>

          <p class="tagline">
            <span class="t-word t-shift">shift</span>
            <span class="t-rest">&nbsp;is standard,&nbsp;</span>
            <span class="t-word t-design">design</span>
            <span class="t-rest">&nbsp;is craft</span>
          </p>
        </section>
      </section>

      <!-- Row 2 (auto height): social row pinned to bottom -->
      {% include social-media-links.html %}
    </main>

    <!-- PNG swap for social icons + brand, and hover color labels -->
    <script>
      (function(){
  // Utility: crossfade a single <img> while swapping src
        function crossfadeSwap(img, nextSrc){
          if (!img || !nextSrc) return;
    img.classList.add('fading');           // fade out
    const done = () => {
      img.removeEventListener('transitionend', done);
      img.src = nextSrc;                   // swap while invisible
      requestAnimationFrame(()=>{          // next frame -> fade back in
        img.classList.remove('fading');
      });
    };
    // If transitionend doesn’t fire (very small durations), fail-safe:
    let armed = false;
    img.addEventListener('transitionend', done, { once:true });
    setTimeout(()=>{ if(!armed) done(); }, 220);
  }

  // Wire brand hover (both images swap smoothly together)
  const brand = document.querySelector('.brand');
  if (brand){
    const imgs = brand.querySelectorAll('img[data-hover][data-default]');
    brand.addEventListener('mouseenter', () => {
      imgs.forEach(img => crossfadeSwap(img, img.dataset.hover));
    });
    brand.addEventListener('mouseleave', () => {
      imgs.forEach(img => crossfadeSwap(img, img.dataset.default));
    });
  }

  // Wire social tiles hover (swap icon to white/black with fade)
  document.querySelectorAll('.social-item').forEach(tile => {
    const img = tile.querySelector('img.social-icon');
    if (!img) return;
    const def = img.dataset.default || img.getAttribute('src');
    const hov = img.dataset.hover;
    tile.addEventListener('mouseenter', () => crossfadeSwap(img, hov));
    tile.addEventListener('mouseleave', () => crossfadeSwap(img, def));
  });
})();
</script>
  </body>
</html>